table(varon_18_irq$is_employed, useNA = "a")
table(varon_18_irq$is_unemployed, useNA = "a")
table(varon_18_irq$is_work_force, useNA = "a")
table(varon_18_noirq$is_employed, useNA = "a")
table(varon_18_noirq$is_unemployed, useNA = "a")
table(varon_18_noirq$is_work_force, useNA = "a")
data_frame <-  varon## read.csv("C:/Users/Haneen Al-Quran/Desktop/VARON 2021 04102021-final dataset_V2")  ##
library(dplyr)
library(openxlsx)
#Filter for 18+ individuals
employemnet_Iraqi <- data_frame %>% filter( age >= 18, Nationality == "IRQ") %>%
mutate( Employemnt_Status = ifelse ( work_as_s == "d. None of the above", "Unemployed", "Employed")) %>%
count(Employemnt_Status) %>% mutate(percent = n/sum(n))
employemnet_other <- data_frame %>% filter( age >= 18, Nationality == "NonIRQ") %>%
mutate( Employemnt_Status = ifelse ( work_as_s == "d. None of the above", "Unemployed", "Employed")) %>%
count(Employemnt_Status) %>% mutate(percent = n/sum(n))
employment_analysis <- createWorkbook()
addWorksheet(employment_analysis, sheetName = "Iraqi Employment")
writeData(employment_analysis, "Iraqi Employment", employemnet_Iraqi, startCol = 1, startRow = 1)
addWorksheet(employment_analysis, sheetName = "Non Iraqi Employment")
writeData(employment_analysis, "Non Iraqi Employment", employemnet_other, startCol = 1, startRow = 1)
saveWorkbook(employment_analysis, file = "C:/Users/Haneen Al-Quran/Desktop/Employment Analysis.xlsx", overwrite = TRUE)
saveWorkbook(employment_analysis, file = "aimo4.xlsx", overwrite = TRUE)
getwd()
library(tidyverse)
library(openxlsx)
# File paths
File <- "D:/OneDrive - UNHCR/Desktop/Test/VARON 2021 04102021-final dataset.xlsx"
Output_File <- "D:/OneDrive - UNHCR/Desktop/Test/Output.xlsx"
Data = readWorkbook(file_path, sheet = 1, startRow = 1, colNames = TRUE,
rowNames = FALSE, detectDates = FALSE, skipEmptyRows = TRUE,
skipEmptyCols = TRUE, check.names = FALSE,
namedRegion = NULL, na.strings = "", fillMergedCells = FALSE)
View(Data)
# Individuals 18+
Employment <- Data %>% filter(age >= 18)
# a. Work for someone else for pay (as employee, labourer, apprentice)
Employment_workForSomeone <- Employment %>%
filter(work_as_s == "a. Work for someone else for pay (as employee, labourer, apprentice)")
# b. Work in own/family farming or fishing, only for sale, mainly for sale
Employment_workInOwn <- Employment %>%
filter(work_as_s == "b. Work in own/family farming or fishing" & farm_an_products_s %in% c("a. Only for sale", "b. Mainly for sale"))
# Install tidyverse and readxl if not installed
#install.packages(setdiff(c("tidyverse", "openxlsx"), rownames(installed.packages())))
library(tidyverse)
library(openxlsx)
# File paths
File <- "D:/OneDrive - UNHCR/Desktop/Test/VARON 2021 04102021-final dataset.xlsx"
Output_File <- "D:/OneDrive - UNHCR/Desktop/Test/Output.xlsx"
Data = readWorkbook(file_path, sheet = 1, startRow = 1, colNames = TRUE,
rowNames = FALSE, detectDates = FALSE, skipEmptyRows = TRUE,
skipEmptyCols = TRUE, check.names = FALSE,
namedRegion = NULL, na.strings = "", fillMergedCells = FALSE)
# Individuals 18+
Employment <- Data %>% filter(age >= 18)
# a. Work for someone else for pay (as employee, labourer, apprentice)
Employment_workForSomeone <- Employment %>%
filter(work_as_s == "a. Work for someone else for pay (as employee, labourer, apprentice)")
# b. Work in own/family farming or fishing, only for sale, mainly for sale
Employment_workInOwn <- Employment %>%
filter(work_as_s == "b. Work in own/family farming or fishing" & farm_an_products_s %in% c("a. Only for sale", "b. Mainly for sale"))
# a. Do any other activity to generate an income, even for 1 hour?
Employment_1hour <- Employment %>%
filter(grepl("a. Do any other activity to generate an income, even for 1 hour?", ind_activity_s) |
ind_activity_s == "b. Have a paid job or business activity, but was temporary absent" |
ind_activity_s == "c. Help without pay in a family business")
Sum_of_individual_employment <- nrow(Employment_workForSomeone) + nrow(Employment_workInOwn) + nrow(Employment_1hour)
Percentage_of_employment = (nrow(Employment_workForSomeone) + nrow(Employment_workInOwn) + nrow(Employment_1hour)) / nrow(Employment)
Percentage_of_employment
?anti_join
# Working-age individuals (18+ years old) who were not employed during the past week (as per the definition above),
Working_age_indv <- Data %>% filter(age >= 18) %>%
anti_join(Employment_workForSomeone) %>%
anti_join(Employment_workInOwn) %>%
anti_join(Employment_1hour)
# Unemployment
Unemployment <- Data %>% filter(age >= 18) %>%
anti_join(Employment_workForSomeone) %>%
anti_join(Employment_workInOwn) %>%
anti_join(Employment_1hour) %>%
filter(paid_job_yn =="a. Yes" | job_opp_avail_yn == "a. Yes")
library(tidyverse)
library(openxlsx)
# File paths
File <- "D:/OneDrive - UNHCR/Desktop/Test/VARON 2021 04102021-final dataset.xlsx"
Output_File <- "D:/OneDrive - UNHCR/Desktop/Test/Output.xlsx"
Data = readWorkbook(file_path, sheet = 1, startRow = 1, colNames = TRUE,
rowNames = FALSE, detectDates = FALSE, skipEmptyRows = TRUE,
skipEmptyCols = TRUE, check.names = FALSE,
namedRegion = NULL, na.strings = "", fillMergedCells = FALSE)
# Individuals 18+
Employment <- Data %>% filter(age >= 18)
# a. Work for someone else for pay (as employee, labourer, apprentice)
Employment_workForSomeone <- Employment %>%
filter(work_as_s == "a. Work for someone else for pay (as employee, labourer, apprentice)")
# b. Work in own/family farming or fishing, only for sale, mainly for sale
Employment_workInOwn <- Employment %>%
filter(work_as_s == "b. Work in own/family farming or fishing" & farm_an_products_s %in% c("a. Only for sale", "b. Mainly for sale"))
# a. Do any other activity to generate an income, even for 1 hour?
Employment_1hour <- Employment %>%
filter(grepl("a. Do any other activity to generate an income, even for 1 hour?", ind_activity_s) |
ind_activity_s == "b. Have a paid job or business activity, but was temporary absent" |
ind_activity_s == "c. Help without pay in a family business")
Sum_of_individual_employment <- nrow(Employment_workForSomeone) + nrow(Employment_workInOwn) + nrow(Employment_1hour)
Percentage_of_employment = (nrow(Employment_workForSomeone) + nrow(Employment_workInOwn) + nrow(Employment_1hour)) / nrow(Employment)
# Working-age individuals (18+ years old) who were not employed during the past week (as per the definition above),
Working_age_indv <- Data %>% filter(age >= 18) %>%
anti_join(Employment_workForSomeone) %>%
anti_join(Employment_workInOwn) %>%
anti_join(Employment_1hour)
# Unemployment
Unemployment <- Data %>% filter(age >= 18) %>%
anti_join(Employment_workForSomeone) %>%
anti_join(Employment_workInOwn) %>%
anti_join(Employment_1hour) %>%
filter(paid_job_yn =="a. Yes" | job_opp_avail_yn == "a. Yes") # should be and and
Sum_of_individual_unemployment <- nrow(Unemployment)
Sum_of_individual_unemployment
Percentage_of_unemployment <- nrow(Unemployment) / nrow(Working_age_indv)
Percentage_of_unemployment
nrow(Unemployment)
nrow(Working_age_indv)
nrow(Working_age_indv)
Percentage_of_unemployment <- nrow(Unemployment) / nrow(Working_age_indv)
Labor_force <- Sum_of_individual_employment + Sum_of_individual_unemployment
# Create a data frame to write results
Parameter <- c("Total individuals assessed", "Employment (indv)", "Employment (%)", "Unemployment (invd)", "Unemployment (%)", "Labor Force (indv)")
Value <- c(nrow(Data), Sum_of_individual_employment, Percentage_of_employment, Sum_of_individual_unemployment, Percentage_of_unemployment, Labor_force)
DF <- data.frame(Parameter, Value)
View(DF)
library(survey)
library(dplyr)
survD <- varon
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 ))%>%
mutate(EmployCntW=EmployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW))
'%ni%' <- Negate("%in%")
survD <- varon
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 ))%>%
mutate(EmployCntW=EmployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW))
survD$WT <- survD$weight
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 ))%>%
mutate(EmployCntW=EmployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW))
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 ))%>%
mutate(EmployCntW=EmployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW))
View(SurvEMPLOY)
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%
mutate(UnemployCntW=UnemployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(UnemployCntW))
survD$WT
#install.packages("survey")
library(survey)
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 ))%>%
mutate(EmployCntW=EmployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW))
SurvEMPLOY
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 ))
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18)%>%
%>%
%>%
mutate(EmployCntW=EmployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW))
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18)
table(SurvEMPLOY$EmployCnt)
table(SurvEMPLOY$EmployCnt, useNA = "a")
table(varon$farm_an_products_s, useNA = "a")
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18) %>%
mutate(EmployCntW=EmployCnt*WT)
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18) %>%
mutate(EmployCntW=EmployCnt*WT)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW))
SurvEMPLOY
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18) %>%
mutate(EmployCntW=EmployCnt*WT)%>%
group_by(Nationality)
SurvEMPLOY
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18) %>%
mutate(EmployCntW=EmployCnt*WT)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW, na.rm = T))
SurvEMPLOY
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18) %>%
mutate(EmployCntW=EmployCnt)%>% #  *WT)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW, na.rm = T))
SurvEMPLOY
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18) %>%
mutate(EmployCntW=EmployCnt)%>% #  *WT)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW, na.rm = F))
SurvEMPLOY
SurvEMPLOY<-survD %>%
mutate(EmployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" | #mainlyforsale was not selected in survey by any respondents
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
""), 1,0 )) %>% filter(age >= 18) %>%
mutate(EmployCntW=EmployCnt)%>% #  *WT)%>%
group_by(Nationality) %>%
summarize(cnt= sum(EmployCntW, na.rm = T))
SurvEMPLOY
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%
mutate(UnemployCntW=UnemployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(UnemployCntW))
SurvUNEMPLOY
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%
mutate(UnemployCntW=UnemployCnt*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(UnemployCntW, na.rm = T))
SurvUNEMPLOY
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%filter(age >= 18)
table(SurvUNEMPLOY$UnemployCnt, useNA = "a")
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%filter(age >= 18)
table(SurvUNEMPLOY$UnemployCnt, useNA = "a")
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse((work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"") )&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 )) %>%filter(age >= 18)
table(SurvUNEMPLOY$UnemployCnt, useNA = "a")
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse((work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"") )& (
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No" ) , 0,1 )) %>%filter(age >= 18)
table(SurvUNEMPLOY$UnemployCnt, useNA = "a")
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse( !(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"") )& (
paid_job_yn == "a. Yes"&
job_opp_avail_yn == "a. Yes" ) , 0,1 )) %>%filter(age >= 18)
table(SurvUNEMPLOY$UnemployCnt, useNA = "a")
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%
mutate(UnemployCntW=UnemployCnt*)%>%
filter(age >= 18)
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%
mutate(UnemployCntW=UnemployCnt*)%>%filter(age >= 18)
SurvUNEMPLOY<-survD %>%
mutate(UnemployCnt = ifelse(work_as_s %ni% c("d. None of the above", "") |
farm_an_products_s == "a. Only for sale" |
ind_activity_s %ni% c("d. Did not do any income generating activity, not even for one hour",
"")&
paid_job_yn == "b. No"&
job_opp_avail_yn == "b. No", 0,1 ))%>%
mutate(UnemployCntW=UnemployCnt)%>%filter(age >= 18)
table(SurvUNEMPLOY$UnemployCnt, useNA = "a")
SurvWRKINGAGE<-survD %>%
mutate(Labor = ifelse(age >= 18,1,0 ))%>%
mutate(LaborW=Labor*WT)%>%
filter(age >= 18)%>%
group_by(Nationality) %>%
summarize(cnt= sum(LaborW))
SurvWRKINGAGE
library(readxl)
library(dplyr)
subset <- varon #read_excel("My Documents/Employment/02. Applications/211229 UNHCR Associate Information Management Officer/Test/Original/VARON 2021 04102021-final dataset.xlsx")
total_employ <- sum(subset$age >= 18 & subset$work_as_s != 'd. None of the above', na.rm = TRUE) + sum(subset$age >= 18 & subset$ind_activity_s != 'd. Did not do any income generating activity, not even for one hour', na.rm = TRUE)
total_employ
total_unemploy <- sum(subset$age >= 18 & subset$paid_job_yn == 'a. Yes' & subset$job_opp_avail_yn == 'a. Yes', na.rm = TRUE)
total_unemploy
total <- total_employ + total_unemploy
total
total_employ_irq <- sum(subset$Nationality =='IRQ' & subset$age >= 18 & subset$work_as_s != 'd. None of the above', na.rm = TRUE) + sum(subset$Nationality =='IRQ' & subset$age >= 18 & subset$ind_activity_s != 'd. Did not do any income generating activity, not even for one hour', na.rm = TRUE)
total_unemploy_irq <- sum(subset$Nationality =='IRQ' & subset$age >= 18 & subset$paid_job_yn == 'a. Yes' & subset$job_opp_avail_yn == 'a. Yes', na.rm = TRUE)
total_irq <- total_employ_irq + total_unemploy_irq
total_pc_employ_irq <- total_employ_irq / total_irq *100
total_pc_unemploy_irq <- total_unemploy_irq / total_irq *100
total_employ_nonirq <- sum(subset$Nationality =='NonIRQ' & subset$age >= 18 & subset$work_as_s != 'd. None of the above', na.rm = TRUE) + sum(subset$Nationality =='NonIRQ' & subset$age >= 18 & subset$ind_activity_s != 'd. Did not do any income generating activity, not even for one hour', na.rm = TRUE)
total_unemploy_nonirq <-sum(subset$Nationality =='NonIRQ' & subset$age >= 18 & subset$paid_job_yn == 'a. Yes' & subset$job_opp_avail_yn == 'a. Yes', na.rm = TRUE)
total_nonirq <- total_employ_nonirq + total_unemploy_nonirq
total_pc_employ_nonirq <- total_employ_nonirq / total_nonirq *100
total_pc_unemploy_nonirq <- total_unemploy_nonirq / total_nonirq *100
total_irq
total_nonirq
#######
?read_spss
# load the package like it was loaded with library()
devtools::load_all()
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = paste(getwd(), "UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta", sep="/"),
file_id = "hh_r_12",
file_name = "Round 11",
file_description = "This file contains the household data collected during the survey (round 1)."
)
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = "C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",
file_id = "hh_r_12",
file_name = "Round 11",
file_description = "This file contains the household data collected during the survey (round 1)."
)
# setup API key
mdl_api_set_key(api_key = Sys.getenv("API_KEY_MDL"))
# set the url to the user testing version of the MDL (https://microdata-uat.unhcr.org/)
mdl_api_set_url(enum_api_url = mdl_enum_api_url$production)
mdl_collection_get()
mdl_collection_list()
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = "C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",
file_id = "hh_r_12",
file_name = "Round 11",
file_description = "This file contains the household data collected during the survey (round 1)."
)
# load the package like it was loaded with library()
devtools::load_all()
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = "C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",
file_id = "hh_r_12",
file_name = "Round 11",
file_description = "This file contains the household data collected during the survey (round 1)."
)
# load the package like it was loaded with library()
devtools::load_all()
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = "C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",
file_id = "hh_r_12",
file_name = "Round 11",
file_description = "This file contains the household data collected during the survey (round 1)."
)
a_file <- haven::read_dta("C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",)
a_file
summary(a_file$access_4_food1)
table(a_file$access_4_food1, useNA = "a")
(a_file$access_4_food1, useNA = "a")
(a_file$access_4_food1)
labelled::val_label(a_file$access_4_food1)
?labelled::val_label
labelled::val_labels(a_file$access_4_food1)
table(a_file$access_4_food1, useNA = "a")
table(as.factor(a_file$access_4_food1), useNA = "a")
table(labelled::unlabelled(a_file$access_4_food1), useNA = "a")
table(labelled::drop_unused_value_labels(a_file$access_4_food1), useNA = "a")
labelled::val_labels(a_file$access_4_food1)
table(as.integer(a_file$access_4_food1), useNA = "a")
a_var <- a_file$access_4_food1
cat_values <- as.character(labelled::val_labels(a_var))
cat_values
cat_table <- table(a_var)
cat_labels <- names(cat_table)
cat_labels
cat_values
cat_values
cat_labels
cat_table
cat_table <- table(as.factor(a_var))
cat_table
cat_table <- table(as.factor(a_var))
cat_table
cat_labels <- names(cat_table)
cat_labels
cat_table <- table(haven::as_factor(a_var))
cat_table
nlevels(haven::as_factor(a_var))
cat_table <- table(haven::as_factor(a_var))
cat_table
cat_labels <- names(cat_table)
cat_labels
# load the package like it was loaded with library()
devtools::load_all()
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = "C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",
file_id = "hh_r_12",
file_name = "Round 11",
file_description = "This file contains the household data collected during the survey (round 1)."
)
# load the package like it was loaded with library()
devtools::load_all()
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = "C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",
file_id = "hh_r_123",
file_name = "Round 11",
file_description = "This file contains the household data collected during the survey (round 1)."
)
a_response <- mdl_vars_create_from_dta(
survey_idno = "UNHCR_CRI_2021_SEIC_v2.1",
file_path = "C:/Users/SANSON/one_drive2/OneDrive - UNHCR/_DATASETS/AMERICAS/economists/UNHCR_CRI_2021_SEIC/2_anonymized/UNHCR_CRI_2021_SEIC_data_round1_v2.1.dta",
file_id = "hh_r1",
file_name = "Round 1",
file_description = "This file contains the household data collected during the survey (round 1)."
)
# creates all files for the package to work
devtools::document()
