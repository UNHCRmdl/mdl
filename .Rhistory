devtools::document()
devtools::document()
devtools::install_github("mvuorre/exampleRPackage")
exampleRPackage::hello()
devtools::document()
remove.packages("exampleRPackage", lib="~/R/win-library/4.0")
devtools::install_github("UNHCRmdl/mdl")
devtools::document()
devtools::install_github("mvuorre/exampleRPackage")
devtools::document()
remove.packages("exampleRPackage", lib="~/R/win-library/4.0")
?sort
devtools::document()
devtools::document()
devtools::load_all()
?mdl_survey_generate_pdf
?mdl_survey_generate_metadata_list
?nadar::survey
?nadar::create
nadar::create
as.numeric(FALSE)
0
as.numeric(FALSE) == 0
identical( as.numeric(FALSE), 0)
identical( as.integer(FALSE), 0)
a_survey_metadata <-  mdl_survey_generate_metadata_list(
survey_idno = "unhcr_test_v2.1", # UNHCR_ETH_2020_SENS_V2.1
title = "title of my survey", # include year at the end but not country name
country_ISO_alpha3_codes = c("ETH"),
enum_survey_study_type = "",
series_information = "",
abstract = "Abstract of my survey",
enum_survey_kind_of_data = "",
unit_of_analysis = "hh and ind",
version_description = "v2.1: Edited, cleaned and anonymised data.", #
version_date = "", # yyyy-mm-dd
scope_description = "The scope includes: hh characteristics, dwellings",
enum_survey_topics = c("topic1", "topic2"),
keywords = c("key1", "key2"),#c("key1", "key2"),
geographic_coverage = "",
universe = "",
primary_investigators = "WFP", # c("UNHCR"), # c()
other_producers = c(""),
sampling_description = "Simple sampling was applied",
weighting_description = "Weight was calculated",
collection_date_start = "2020-12-12",
collection_date_end = "2021-01-01",
enum_survey_collection_mode = "enum collection mode",
data_collection_notes = "",
data_collectors = c("collector 1", "collector2"),
questionnaire_description = "questionaire contained the following ",
contacts_list = list(list(name = "Curation team", affiliation = "UNHCR", email = "microdata@unhcr.org"),
list(name = "Curation team2", affiliation = "UNHCR2", email = "microdata2@unhcr.org"))
)
a_survey_metadata$study_desc$title_statement$idno
mdl_enum_catalog$Asia
mdl_enum_catalog$MENA
mdl_enum_catalog$WestAfrica
mdl_enum_survey_access_policy$`Licensed use files`
mdl_enum_survey_access_policy$'Licensed use files'
mdl_enum_survey_access_policy$'Licensed use files'
mdl_enum_country$LBN
devtools::document()
devtools::load_all()
?mdl_survey_generate_metadata_list
devtools::document()
devtools::load_all()
?mdl_survey_generate_metadata_list
mdl_enum_survey_topics$Health
mdl_enum_survey_topics$Protection
?list
devtools::document()
devtools::load_all()
?mdl_survey_generate_metadata_list
as.numeric("yes")
?mdl_survey_create
mdl_enum_country$PER
mdl_enum_country$BRA
mdl_enum_country$COL
mdl_enum_country$GUY
mdl_enum_country$PAN
mdl_enum_country$DOM
mdl_enum_country$ECU
devtools::document()
devtools::document()
devtools::load_all()
?mdl_vars_create_from_dataframe
devtools::document()
devtools::load_all()
?mdl_vars_create_from_dta
?mdl_vars_create_from_dataframe
devtools::document()
devtools::load_all()
mdl_api_open_documentation()
devtools::load_all()
devtools::document()
devtools::document()
devtools::load_all()
?mdl_resource_upload
iris
iris3
mtcars
?nadar::set_api
?nadar::set_api_url
devtools::load_all()
devtools::document()
devtools::load_all()
?mdl_api_set_key
?mdl_api_set_url
mdl_enum_api_url$uat
# setup API key
mdl_api_set_key("924e1d2f89b39574fe26bbc595293834")
# set the url to the user testing version of the MDL (https://microdata-uat.unhcr.org/)
mdl_api_set_url(mdl_enum_api_url$uat)
# get a test data frame and label it
a_data_frame <- iris
labelled::var_label
haven::read_dta
names(iris)
labelled::var_label(a_data_frame) <- list(Sepal.Length =  "Length of sepal", Sepal.Width = "Width of sepal", Petal.Length = "Length of petal", Petal.Width = "Width of Petal", Species = "Species")
View(a_data_frame)
# create the metadata for a new survey
a_survey_metadata <-  mdl_survey_generate_metadata_list(
survey_idno = "UNHCR_ETH_2021_TEST_v2.1",
title = "A Test Survey, 2021",
country_ISO_alpha3_codes = c("ETH"),
enum_survey_study_type = mdl_enum_survey_study_type$`Sample Frame, Households [sf/hh]`,
series_information = "A series test...",
abstract = "This is a test survey create using APIs...",
enum_survey_kind_of_data = mdl_enum_survey_kind_of_data$`Sample survey data [ssd]`,
unit_of_analysis = "Household",
version_description = "v2.1: Edited, cleaned and anonymised data.",
version_date = "2021-07-04",
scope_description = "The scope includes: \n- household characteristics \n- dwellings",
enum_survey_topics = c(mdl_enum_survey_topics$Health, mdl_enum_survey_topics$Protection),
keywords = c("Keyword 1", "Keyword 2", "Keyword 3"),
geographic_coverage = "Whole country.",
universe = "All people of concern.",
primary_investigators = c("UNHCR"),
other_producers = c("Another organisation"),
sampling_description = "Simple sampling was applied...",
weighting_description = "Weight was calculated in the following manner...",
collection_date_start = "2020-12-12",
collection_date_end = "2021-01-01",
enum_survey_collection_mode = mdl_enum_survey_collection_mode$`Face-to-face [f2f]`,
data_collection_notes = "Enumerators took a 3-day course...",
data_collectors = c("Collector 1", "Collector2"),
questionnaire_description = "Questionaire contained the following sections: ... ",
contacts_list = list(list(name = "Curation team", affiliation = "UNHCR", email = "xxx@xxx.org"),
list(name = "Another team", affiliation = "UNHCR", email = "xxx2@xxx.org"))
)
?v
?mdl_survey_create
# create the survey passing the metadata list
a_response <- mdl_survey_create(
survey_metadata_list = a_survey_metadata,
enum_catalog = mdl_enum_catalog$EastAfrica,
enum_survey_access_policy = mdl_enum_survey_access_policy$`Licensed use files`,
published = FALSE,
overwrite = FALSE
)
mdl_survey_create
nadar::create
devtools::install()
a_response
a_survey_metadata
# create the survey passing the metadata list
a_response <- mdl_survey_create(
survey_metadata_list = a_survey_metadata,
enum_catalog = mdl_enum_catalog$EastAfrica,
enum_survey_access_policy = mdl_enum_survey_access_policy$`Licensed use files`,
published = FALSE,
overwrite = FALSE
)
get_verbose
jsonlite::fromJSON
httr::content
httr::POST
httr::add_headers
httr::content_type_json
httr::accept_json
devtools::document()
devtools::load_all()
a_survey_metadata
# create the survey passing the metadata list
a_response <- mdl_survey_create(
survey_metadata_list = a_survey_metadata,
enum_catalog = mdl_enum_catalog$EastAfrica,
enum_survey_access_policy = mdl_enum_survey_access_policy$`Licensed use files`,
published = FALSE,
overwrite = FALSE
)
devtools::load_all()
# create the survey passing the metadata list
a_response <- mdl_survey_create(
survey_metadata_list = a_survey_metadata,
enum_catalog = mdl_enum_catalog$EastAfrica,
enum_survey_access_policy = mdl_enum_survey_access_policy$`Licensed use files`,
published = FALSE,
overwrite = FALSE
)
?nadar::create
devtools::load_all()
# create the survey passing the metadata list
a_response <- mdl_survey_create(
survey_metadata_list = a_survey_metadata,
enum_catalog = mdl_enum_catalog$EastAfrica,
enum_survey_access_policy = mdl_enum_survey_access_policy$`Licensed use files`,
published = FALSE,
overwrite = FALSE
)
a_response
?mdl_vars_create_from_dataframe
a_data_frame
a_response <- mdl_vars_create_from_dataframe(
survey_idno = "UNHCR_ETH_2021_TEST_v2.1",
data_frame = a_data_frame,
file_id = "hh",
file_name = "Households",
file_description = "This file contains the household data collected during the survey."
)
getwd()
# create a test file
write.csv(iris, "test_file.csv")
?mdl_resource_upload
# upload a file and create a resource linked to it
a_response <- mdl_resource_upload(
survey_idno = "UNHCR_ETH_2021_TEST_v2.1",
file_path = "test_file.csv",
enum_resource_type = mdl_enum_resource_type$microdata,
resource_title = "Household data",
resource_description = "Contains the household data collected during the survey"
)
nadar::external_resources_upload
jsonlite::fromJSON
nadar::get_api_url
httr::upload_file
httr::POST
httr::add_headers
httr::accept_json
httr::content
jsonlite::fromJSON
httr::content
devtools::load_all()
# upload a file and create a resource linked to it
a_response <- mdl_resource_upload(
survey_idno = "UNHCR_ETH_2021_TEST_v2.1",
file_path = "test_file.csv",
enum_resource_type = mdl_enum_resource_type$microdata,
resource_title = "Household data",
resource_description = "Contains the household data collected during the survey"
)
devtools::load_all()
# upload a file and create a resource linked to it
a_response <- mdl_resource_upload(
survey_idno = "UNHCR_ETH_2021_TEST_v2.1",
file_path = "test_file.csv",
enum_resource_type = mdl_enum_resource_type$microdata,
resource_title = "Household data",
resource_description = "Contains the household data collected during the survey"
)
?mdl_api_set_key
?mdl_api_set_url
mdl_survey_generate_pdf("DDI_KEN_UNHCR_PDM_CBI_Kalobeyei_2020_v1.0")
devtools::document()
